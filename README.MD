# Финальный Проэкт #
## Тема: Terraform, Google Cloud Platform, Jenkins, Apache ##
-------------------------------------
Задача: развернуть статическую страничку index.html на двух серверах автоматически
-------------------------------------
Пункты для осуществления поставленной задачи:
1. Terraform поднимаю четыре инстанса на Google Cloud Platfrom (git, jenkins, ubuntu-profaction-1, ubuntu-testing)
2. Создаю правило в firewall для подключения к jenkins (0.0.0.0/0 port:8080)
3. Установка ПО на инстансы. На машину git: установил только git, на машине jenkins: установил java 8, jenkins, в firewall linux дал права на порт 8080, на машинах ubuntu-profaction-1 и ubuntu-testing: установил apache2, в firewall linux дал права на подключение к http (port 80), https (port 443).
4.  На каждой машине создал отдельного пользователя с правами sudo, на машине jenkins сгенерировал ssh-ключ, public-key поместил на машины ubuntu-profaction-1 и ubuntu-testing в /home/.ssh/autorithedkeys, запретил подключения с помощью пароля на каждой машине. Подключение осуществлялось только по ssh-ключам.
5. Далее в Jenkins добавил сервера (ubuntu-profaction-1 и ubuntu-testing) с помощью ранее сгенерированного ssh-ключа на машине jenkins. Для того чтобы дэплоить файл на эти машины.
6. Создал 3 задачи jenkins. Первая задача по ssh подключается к моему репозиторию на git-hub на который я заливаю index.html (с машины git, на которой я изменяю этот файл) сохраняет артифакт этого файла каждый раз как в него вносятся изменения. Вторая задача автоматически по завершении первой копирует артифакт с первой задачи и помещает файл index.html по пути /var/www/html на машине ubuntu-testing. Третья задача выполняется автоматически, после того как я нажму aprove, тотже файл зальется по тому-же пути но уже на машину ubuntu-profaction-1.